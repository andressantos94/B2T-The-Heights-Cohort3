<!DOCTYPE html>
<html>
	<head>
		<title></title>
	</head>
	<body>

		<style type="text/css">
			input{
				width: 150px;
				height: 100px;
				font-size: 200%;
			}
			table{
				margin: auto;
			}
			h1{
				width: 456px;
				height: 50px;
				margin: auto;
				border: solid 1px black;
				text-align: right;
				font-size: 200%;
			}
		</style>
		<h1 id="h1"></h1>
		<table>
			<tr>
				<th><input type="button" value="1" onclick="screen(this)"></th>
				<th><input type="button" value="2" onclick="screen(this)"></th>
				<th><input type="button" value="3" onclick="screen(this)"></th>
			</tr>
			<tr>
				<th><input type="button" value="4" onclick="screen(this)"></th>
				<th><input type="button" value="5" onclick="screen(this)"></th>
				<th><input type="button" value="6" onclick="screen(this)"></th>
			</tr>
			<tr>
				<th><input type="button" value="7" onclick="screen(this)"></th>
				<th><input type="button" value="8" onclick="screen(this)"></th>
				<th><input type="button" value="9" onclick="screen(this)"></th>
			</tr>
			<tr>
				<th><input type="button" value="+" onclick="operation(this)"></th>
				<th><input type="button" value="0" onclick="screen(this)"></th>
				<th><input type="button" value="-" onclick="operation(this)"></th>
			</tr>
			<tr>
				<th><input type="button" value="*" onclick="operation(this)"></th>
				<th><input type="button" value="/" onclick="operation(this)"></th>
				<th><input type="button" value="=" onclick="result(this)"></th>

			</tr>
		</table>

		<script type="text/javascript">

			var i=0;
			var auxn="";
			var flag = false;

			document.addEventListener("keydown",function (e){
				if(e.keyCode == 27){
					document.getElementById("h1").innerHTML="";
					auxn="";
				}else if(e.keyCode == 13){
					console.log("This is auxn before result(), when press enter key:"+auxn);
					flag=true;
					result();
				}
			});	

			document.addEventListener("keyup",function (e){
				if(e.keyCode == 13){
					flag=false;
				}
			});

			
			function screen(num) {

				if(flag==false){
				console.log("This is auxn before user enter a number:"+auxn);
				document.getElementById("h1").innerHTML+=num.value;
				auxn=document.getElementById("h1").innerHTML;
				console.log("This is auxn after user enter a number:"+auxn);
				}

			}

			function operation(ope) {
				
				var checkOp = document.getElementById("h1").innerHTML;
				console.log(checkOp);
				console.log(checkOp.length-1);
				console.log(checkOp[checkOp.length-1]);
				var condition = checkOp[checkOp.length-1]=="+"||checkOp[checkOp.length-1]=="-"||checkOp[checkOp.length-1]=="*"||checkOp[checkOp.length-1]=="/";
				console.log(condition);
				if(condition){
					temp = auxn.slice(0,auxn.length-1);
					document.getElementById("h1").innerHTML= temp + ope.value;
					auxn=document.getElementById("h1").innerHTML;
					i++;
				}else{
					document.getElementById("h1").innerHTML+=ope.value;
					auxn=document.getElementById("h1").innerHTML;
					i++;	
				}
			}

			function result() {

				console.log("This is auxn before evaluate result:"+auxn);
				document.getElementById("h1").innerHTML="";
				document.getElementById("h1").innerHTML= eval(auxn);
				console.log("Result:"+eval(auxn));
				auxn="";

			}

		</script>

	</body>
</html>